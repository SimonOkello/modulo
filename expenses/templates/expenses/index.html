{% extends 'includes/base.html' %}
{% load static %}
{% block title %}
  Dashboard
{% endblock title %}
{% block content %}
<!-- Page Wrapper -->
<div class="page-wrapper">
	<div class="content container-fluid">

		<div class="row">
			<div class="col-xl-3 col-sm-6 col-12">
				<div class="card">
					<div class="card-body">
						<div class="dash-widget-header">
							<span class="dash-widget-icon bg-1">
								<i class="fas fa-dollar-sign"></i>
							</span>
							<div class="dash-count">
								<div class="dash-title">Expenses</div>
								<div class="dash-counts">
									<p>{{sum_of_expenses|floatformat:2}}</p>
								</div>
							</div>
						</div>
						<div class="progress progress-sm mt-3">
							<div class="progress-bar bg-5" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
						</div>
						<p class="text-muted mt-3 mb-0"><span class="text-danger mr-1"><i class="fas fa-arrow-down mr-1"></i>1.15%</span> since last week</p>
					</div>
				</div>
			</div>
			<div class="col-xl-3 col-sm-6 col-12">
				<div class="card">
					<div class="card-body">
						<div class="dash-widget-header">
							<span class="dash-widget-icon bg-2">
								<i class="fas fa-dollar-sign"></i>
							</span>
							<div class="dash-count">
								<div class="dash-title">Income</div>
								<div class="dash-counts">
									<p>{{sum_of_income|floatformat:2}}</p>
								</div>
							</div>
						</div>
						<div class="progress progress-sm mt-3">
							<div class="progress-bar bg-6" role="progressbar" style="width: 65%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
						</div>
						<p class="text-muted mt-3 mb-0"><span class="text-success mr-1"><i class="fas fa-arrow-up mr-1"></i>2.37%</span> since last week</p>
					</div>
				</div>
			</div>
			<div class="col-xl-3 col-sm-6 col-12">
				<div class="card">
					<div class="card-body">
						<div class="dash-widget-header">
							<span class="dash-widget-icon bg-3">
								<i class="fas fa-file-alt"></i>
							</span>
							<div class="dash-count">
								<div class="dash-title">Invoices</div>
								<div class="dash-counts">
									<p>1,041</p>
								</div>
							</div>
						</div>
						<div class="progress progress-sm mt-3">
							<div class="progress-bar bg-7" role="progressbar" style="width: 85%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
						</div>
						<p class="text-muted mt-3 mb-0"><span class="text-success mr-1"><i class="fas fa-arrow-up mr-1"></i>3.77%</span> since last week</p>
					</div>
				</div>
			</div>
			<div class="col-xl-3 col-sm-6 col-12">
				<div class="card">
					<div class="card-body">
						<div class="dash-widget-header">
							<span class="dash-widget-icon bg-4">
								<i class="far fa-file"></i>
							</span> 
							<div class="dash-count">
								<div class="dash-title">Estimates</div>
								<div class="dash-counts">
									<p>2,150</p>
								</div>
							</div>
						</div>
						<div class="progress progress-sm mt-3">
							<div class="progress-bar bg-8" role="progressbar" style="width: 45%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
						</div>
						<p class="text-muted mt-3 mb-0"><span class="text-danger mr-1"><i class="fas fa-arrow-down mr-1"></i>8.68%</span> since last week</p>
					</div>
				</div>
			</div>
		</div>
		
		<div class="row">
			<div class="col-xl-7 d-flex">
				<div class="card flex-fill">
					<div class="card-header">
						<div class="d-flex justify-content-between align-items-center">
							<h5 class="card-title">Expense Analytics</h5> 
							<div class="dropdown" data-toggle="dropdown">
								<a href="javascript:void(0);" class="btn btn-white btn-sm dropdown-toggle" role="button" data-toggle="dropdown">
									Monthly
								</a>
								<div class="dropdown-menu dropdown-menu-right">
									<a href="javascript:void(0);" class="dropdown-item">Weekly</a>
									<a href="javascript:void(0);" class="dropdown-item">Monthly</a>
									<a href="javascript:void(0);" class="dropdown-item">Yearly</a>
								</div>
							</div>
						</div>
					</div>
					<div class="card-body">
						<div class="d-flex align-items-center justify-content-between flex-wrap flex-md-nowrap">
							<div class="w-md-100 d-flex align-items-center mb-3">
								<div>
									<span>Total Sales</span>
									<p class="h3 text-primary mr-5">$1000</p>
								</div>
								<div>
									<span>Receipts</span>
									<p class="h3 text-success mr-5">$1000</p>
								</div>
								<div>
									<span>Expenses</span>
									<p class="h3 text-danger mr-5">$300</p>
								</div>
								<div>
									<span>Earnings</span>
									<p class="h3 text-dark mr-5">$700</p>
								</div>
							</div>
						</div>
						
						<div id="sales_chart"></div>
					</div>
				</div>
			</div>
			<div class="col-xl-5 d-flex">
				<div class="card flex-fill">
					<div class="card-header">
						<div class="d-flex justify-content-between align-items-center">
							<h5 class="card-title">Income Analytics</h5> 
							<div class="dropdown" data-toggle="dropdown">
								<a href="javascript:void(0);" class="btn btn-white btn-sm dropdown-toggle" role="button" data-toggle="dropdown">
									Monthly
								</a>
								<div class="dropdown-menu dropdown-menu-right">
									<a href="javascript:void(0);" class="dropdown-item">Weekly</a>
									<a href="javascript:void(0);" class="dropdown-item">Monthly</a>
									<a href="javascript:void(0);" class="dropdown-item">Yearly</a>
								</div>
							</div>
						</div>
					</div>
					<div class="card-body">
						<div id="invoice_chart"></div>
						<div class="text-center text-muted">
							<div class="row">
								<div class="col-4">
									<div class="mt-4">
										<p class="mb-2 text-truncate"><i class="fas fa-circle text-primary mr-1"></i> Invoiced</p>
										<h5>$ 2,132</h5>
									</div>
								</div>
								<div class="col-4">
									<div class="mt-4">
										<p class="mb-2 text-truncate"><i class="fas fa-circle text-success mr-1"></i> Received</p>
										<h5>$ 1,763</h5>
									</div>
								</div>
								<div class="col-4">
									<div class="mt-4">
										<p class="mb-2 text-truncate"><i class="fas fa-circle text-danger mr-1"></i> Pending</p>
										<h5>$ 973</h5>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-6 col-sm-6">
				<div class="card">
					<div class="card-header">
						<div class="row">
							<div class="col">
								<h5 class="card-title">Recent Expenses</h5>
							</div>
							<div class="col-auto">
								<a href="{% url 'expenses' %}" class="btn-right btn btn-sm btn-outline-primary">
									View All 
								</a>
							</div>
						</div>
					</div>
					<div class="card-body">	
						<div class="table-responsive">
						
							<table class="table table-stripped table-hover">
								<thead class="thead-light">
									<tr>
										<th>Category</th>
										<th>Expense Date</th>
										<th>Notes</th>
										<th>Amount({{currency}})</th>
									</tr>
								</thead>
								<tbody>
									{% for expense in expenses %}
									<tr>
										<td>{{expense.category}}</td>
										<td>{{expense.date}}</td>
										<td>{{expense.description}}</td>
										<td>{{expense.amount}}</td>
									</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-6 col-sm-6">
				<div class="card">
					<div class="card-header">
						<div class="row">
							<div class="col">
								<h5 class="card-title">Recent Incomes</h5>
							</div>
							<div class="col-auto">
								<a href="{% url 'income' %}" class="btn-right btn btn-sm btn-outline-primary">
									View All 
								</a>
							</div>
						</div>
					</div>
					<div class="card-body">
						<div class="table-responsive">
							<table class="table table-hover">
								<thead class="thead-light">
									<tr>
										<th>Source</th>
										<th>Income Date</th>
										<th>Notes</th>
										<th>Amount({{currency}})</th>
									</tr>
								</thead>
								<tbody>
									{% for income in incomes %}
									<tr>
										<td>{{income.source}}</td>
										<td>{{income.date}}</td>
										<td>{{income.description}}</td>
										<td>{{income.amount}}</td>
									</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- /Page Wrapper -->
<!-- jQuery -->
<script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
		
<!-- Bootstrap Core JS -->
<script src="{% static 'js/popper.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>

<!-- Feather Icon JS -->
<script src="{% static 'js/feather.min.js' %}"></script>

<!-- Slimscroll JS -->
<script src="{% static 'plugins/slimscroll/jquery.slimscroll.min.js' %}"></script>

<!-- Chart JS -->
<script src="{% static 'plugins/apexchart/apexcharts.min.js' %}"></script>
<script src="{% static 'plugins/apexchart/chart-data.js' %}"></script>

<!-- Custom JS -->
<script src="{% static 'js/script.js' %}"></script>
<script src="{% static 'js/expenseCharts.js' %}"></script>
<!-- <script src="{% static 'js/incomeCharts.js' %}"></script> -->

{% endblock %}